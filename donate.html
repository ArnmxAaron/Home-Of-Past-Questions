<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate Page | House of Past Questions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = { darkMode: 'class' };
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s ease; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .payment-card {
            @apply flex items-center justify-between p-4 mb-3 border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 rounded-2xl cursor-pointer transition-all active:scale-[0.97] hover:bg-slate-50 dark:hover:bg-slate-800/50 shadow-sm;
        }

        .donor-card { 
            @apply flex-shrink-0 w-32 bg-white dark:bg-slate-900 p-4 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm text-center transition-transform active:scale-95; 
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-950 pb-20 transition-colors">

<div id="thank-you-toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 z-[60] translate-y-20 opacity-0 transition-all duration-500 ease-out pointer-events-none">
    <div class="bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-6 py-4 rounded-[1.5rem] shadow-2xl flex items-center gap-3 border border-white/10 dark:border-slate-200">
        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0">
            <i class="fas fa-check text-white text-xs"></i>
        </div>
        <div class="whitespace-nowrap">
            <p class="text-[10px] font-black uppercase tracking-widest opacity-70">Address Copied</p>
            <p class="text-xs font-bold">Thank you for your support! ❤️</p>
        </div>
    </div>
</div>

<header class="bg-white dark:bg-slate-900 border-b border-slate-100 dark:border-slate-800 py-6 px-6 sticky top-0 z-40">
    <div class="max-w-xl mx-auto flex items-center justify-between">
        <a href="index.html" class="text-slate-400 hover:text-blue-600 transition-colors">
            <i class="fas fa-arrow-left"></i>
        </a>
        <h1 class="text-[10px] font-black uppercase tracking-[0.3em] text-slate-800 dark:text-white">Donate Page</h1>
        <div class="w-4"></div>
    </div>
</header>

<main class="max-w-xl mx-auto px-6 mt-8">
    
    <section class="mb-10 text-center">
        <div class="inline-block bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-4 py-2 rounded-2xl text-[9px] font-black uppercase tracking-widest mb-4">
            Community Driven
        </div>
        <h2 class="text-2xl font-black text-slate-800 dark:text-white mb-3">Support the Mission.</h2>
        <p class="text-xs text-slate-500 dark:text-slate-400 leading-relaxed px-4">
            Your donations help us provide past papers for <b>WASSCE, NECO, JAMB, NSC, Kenya,</b> and high-quality educational apps for all students.
        </p>
    </section>

    <section class="mb-10">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-[9px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest">Recent Donors</h2>
            <span class="text-[8px] font-bold text-emerald-500 uppercase">Verified</span>
        </div>
        
        <div class="flex gap-4 overflow-x-auto no-scrollbar pb-2" id="donorList">
            <div id="loadingDonors" class="text-[8px] font-black text-slate-400 uppercase tracking-widest p-4">Loading Wall of Fame...</div>
            
            <div id="inviteCard" class="donor-card border-dashed border-slate-200 dark:border-slate-800 flex flex-col justify-center items-center">
                <div class="w-8 h-8 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-1">
                    <i class="fas fa-plus text-slate-400 text-[8px]"></i>
                </div>
                <span class="text-[7px] font-black text-slate-400 uppercase tracking-tighter">Your Name</span>
            </div>
        </div>
    </section>

    <section class="mb-10">
        <h2 class="text-[9px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-4">Payment Methods</h2>

        <div class="payment-card border-blue-500/20" onclick="copyValue('TU26QKgFNFy8q3hNDWgHCwyRZGvqRNqgBc', 'USDT')">
            <div class="flex items-center gap-4 overflow-hidden">
                <div class="w-10 h-10 bg-blue-500/10 rounded-xl flex items-center justify-center flex-shrink-0"><i class="fas fa-coins text-blue-600"></i></div>
                <div class="overflow-hidden">
                    <h4 class="text-xs font-black text-slate-800 dark:text-white uppercase">USDT (TRC20)</h4>
                    <p class="text-[9px] text-slate-500 truncate">TU26QKgFNFy8q3hNDWgHCwyRZGvqRNqgBc</p>
                </div>
            </div>
            <i class="far fa-copy text-slate-300"></i>
        </div>

        <div class="payment-card border-emerald-500/20" onclick="copyValue('8109244167', 'OPay')">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-[#00C190]/10 rounded-xl flex items-center justify-center flex-shrink-0"><i class="fas fa-wallet text-[#00C190]"></i></div>
                <div>
                    <h4 class="text-xs font-black text-slate-800 dark:text-white uppercase">OPay (NG)</h4>
                    <p class="text-[9px] text-slate-500 font-bold">810 924 4167 • Ezekiel Eddy</p>
                </div>
            </div>
            <i class="far fa-copy text-slate-300"></i>
        </div>

        <div class="payment-card border-orange-500/20" onclick="copyValue('+23274183963', 'Orange Money')">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-orange-500/10 rounded-xl flex items-center justify-center flex-shrink-0"><i class="fas fa-mobile-alt text-orange-600"></i></div>
                <div>
                    <h4 class="text-xs font-black text-slate-800 dark:text-white uppercase">Orange Money (SL)</h4>
                    <p class="text-[9px] text-slate-500 font-bold">+232 74 183963</p>
                </div>
            </div>
            <i class="far fa-copy text-slate-300"></i>
        </div>

        <div class="payment-card border-yellow-500/20" onclick="copyValue('+23299761998', 'AfriMoney')">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-yellow-500/10 rounded-xl flex items-center justify-center flex-shrink-0"><i class="fas fa-mobile-alt text-yellow-600"></i></div>
                <div>
                    <h4 class="text-xs font-black text-slate-800 dark:text-white uppercase">AfriMoney (SL)</h4>
                    <p class="text-[9px] text-slate-500 font-bold">+232 99 761998</p>
                </div>
            </div>
            <i class="far fa-copy text-slate-300"></i>
        </div>

        <div class="payment-card border-purple-500/20" onclick="copyValue('ezekiel.eddy44@gmail.com', 'Skrill')">
            <div class="flex items-center gap-4 overflow-hidden">
                <div class="w-10 h-10 bg-purple-500/10 rounded-xl flex items-center justify-center flex-shrink-0"><i class="fas fa-paper-plane text-purple-600"></i></div>
                <div class="overflow-hidden">
                    <h4 class="text-xs font-black text-slate-800 dark:text-white uppercase">Skrill</h4>
                    <p class="text-[9px] text-slate-500 font-bold truncate">ezekiel.eddy44@gmail.com</p>
                </div>
            </div>
            <i class="far fa-copy text-slate-300"></i>
        </div>
    </section>

    <div class="bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 p-8 rounded-[3rem] text-center mb-10 shadow-sm">
        <p class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4">Made a Payment?</p>
        <a href="confirm.html" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-5 rounded-2xl flex items-center justify-center gap-3 transition-all active:scale-[0.98]">
            <span class="text-[10px] font-black uppercase tracking-[0.2em]">Confirm Donation</span>
            <i class="fas fa-check-circle text-[12px]"></i>
        </a>
    </div>

</main>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
    import { getFirestore, collection, query, where, limit, onSnapshot, orderBy } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDEuLXR4LVlz44YTI2pjdlt0cnp6f4IWEk",
        authDomain: "hofpastquestions.firebaseapp.com",
        projectId: "hofpastquestions",
        storageBucket: "hofpastquestions.firebasestorage.app",
        messagingSenderId: "287429266196",
        appId: "1:287429266196:web:25e8efd4040cf70ac61001"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const donorList = document.getElementById('donorList');
    const inviteCard = document.getElementById('inviteCard');
    const loadingText = document.getElementById('loadingDonors');

    const q = query(
        collection(db, "donations"), 
        where("status", "==", "approved"), 
        orderBy("createdAt", "desc"), 
        limit(15)
    );

    onSnapshot(q, (snapshot) => {
        const existingCards = donorList.querySelectorAll('.real-donor');
        existingCards.forEach(card => card.remove());
        
        if (loadingText) loadingText.remove();

        snapshot.forEach((doc) => {
            const data = doc.data();
            const initial = data.donorName ? data.donorName.charAt(0).toUpperCase() : '?';
            
            const colors = ['bg-indigo-500', 'bg-emerald-500', 'bg-rose-500', 'bg-amber-500', 'bg-violet-600', 'bg-sky-500'];
            const charCode = initial.charCodeAt(0) || 0;
            const bgClass = colors[charCode % colors.length];

            let profileHTML = '';
            const hasPic = data.profilePic && 
                         data.profilePic.trim() !== "" && 
                         data.profilePic.includes('http') && 
                         !data.profilePic.includes('pravatar');

            if (hasPic) {
                profileHTML = `<img src="${data.profilePic}" class="w-full h-full object-cover">`;
            } else {
                profileHTML = `<div class="w-full h-full ${bgClass} flex items-center justify-center text-white text-sm font-black shadow-inner">${initial}</div>`;
            }

            const donorDiv = document.createElement('div');
            donorDiv.className = "donor-card real-donor";
            donorDiv.innerHTML = `
                <div class="w-12 h-12 rounded-full mx-auto mb-2 overflow-hidden ring-2 ring-slate-100 dark:ring-slate-800 ring-offset-2 dark:ring-offset-slate-900 shadow-sm">
                    ${profileHTML}
                </div>
                <h3 class="text-[9px] font-black text-slate-800 dark:text-white uppercase truncate px-1">${data.donorName}</h3>
                <p class="text-[8px] font-black text-emerald-500 mt-1 tracking-tighter">${data.amount} <span class="opacity-70">${data.currency || 'USD'}</span></p>
            `;
            donorList.insertBefore(donorDiv, inviteCard);
        });
    });

    // Integrated Copy Logic
    window.copyValue = function(text, provider) {
        navigator.clipboard.writeText(text).then(() => {
            const toast = document.getElementById('thank-you-toast');
            
            // Show toast
            toast.classList.remove('translate-y-20', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');

            // Hide toast after 3s
            setTimeout(() => {
                toast.classList.remove('translate-y-0', 'opacity-100');
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }).catch(err => console.error('Copy failed', err));
    }
</script>
</body>

</html>

